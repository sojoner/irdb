# postgresql.conf - Optimized for AI/ML workloads with vector & BM25 search
# Tuned for 12 CPU / 24GB RAM nodes (2 nodes in cluster)

# Memory settings (25% of 24GB = 6GB shared_buffers for vector/BM25 indices)
shared_buffers = 6GB
effective_cache_size = 18GB
work_mem = 128MB
maintenance_work_mem = 2GB

# Connection settings
listen_addresses = '*'
max_connections = 400
shared_preload_libraries = 'pg_search,pg_stat_statements'

# Parallel processing for vector similarity & BM25 searches
max_parallel_workers = 10
max_parallel_workers_per_gather = 5
max_parallel_maintenance_workers = 4
max_worker_processes = 10

# Logging for monitoring
log_statement = 'mod'
log_min_duration_statement = 1000
log_checkpoints = on
log_connections = on
log_disconnections = on

# Performance settings
checkpoint_completion_target = 0.9
wal_buffers = 64MB
random_page_cost = 1.1

# Additional tuning for vector operations
effective_io_concurrency = 200
seq_page_cost = 1.0
